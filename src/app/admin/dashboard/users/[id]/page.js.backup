'use client';

import { useParams, useRouter } from 'next/navigation';
import { useState, useEffect } from 'react';
import { usersAPI } from '@/utils/api';

export default function UserProfile() {
  const params = useParams();
  const router = useRouter();
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [activeTab, setActiveTab] = useState('overview');
  const [walletSubTab, setWalletSubTab] = useState('balance');
  const [notificationSubTab, setNotificationSubTab] = useState('list');

  useEffect(() => {
    const fetchUserData = async () => {
      try {
        setLoading(true);
        setError(null);

        const userId = pa rams.id;

        if (!userId) {
          setError('User ID not found');
          return;
        }

        // First try to get user from the users list API
        const usersResponse = await usersAPI.getAll();
        if (usersResponse.success && usersResponse.data) {
          const foundUser = usersResponse.data.find(u => u.id === userId || u._id === userId || u.userId === userId);
          if (foundUser) {
            // Transform the data to match the expected format
            const transformedUser = {
              id: foundUser.id || foundUser._id,
              userId: foundUser.userId,
              name: foundUser.nickname || `User${foundUser.userId?.slice(-6) || ''}`,
              email: foundUser.email,
              plan: foundUser.subscription?.plan === 'free' ? 'Basic' :
                    foundUser.subscription?.plan === 'basic' ? 'Basic' :
                    foundUser.subscription?.plan === 'premium' ? 'Premium' :
                    foundUser.subscription?.plan === 'enterprise' ? 'Pro' : 'Basic',
              status: foundUser.isActive ? 'Active' : 'Inactive',
              joinDate: foundUser.createdAt ? new Date(foundUser.createdAt).toISOString().split('T')[0] : new Date().toISOString().split('T')[0],
              phone: '+1 (555) 000-0000', // Mock data since not in schema
              location: `${foundUser.location?.city || 'Unknown'}, ${foundUser.location?.country || 'Unknown'}`,
              lastLogin: foundUser.lastLogin ? new Date(foundUser.lastLogin).toLocaleString() : 'Never',
              totalProjects: Math.floor(Math.random() * 50) + 1, // Mock data
              storageUsed: `${(Math.random() * 10).toFixed(1)} GB`, // Mock data
              storageLimit: foundUser.subscription?.plan === 'free' ? '1 GB' :
                           foundUser.subscription?.plan === 'basic' ? '10 GB' :
                           foundUser.subscription?.plan === 'premium' ? '100 GB' :
                           foundUser.subscription?.plan === 'enterprise' ? '500 GB' : '1 GB',
              billingCycle: 'Monthly', // Mock data
              nextBilling: foundUser.subscription?.endDate ? new Date(foundUser.subscription.endDate).toISOString().split('T')[0] : 'N/A',
              paymentMethod: 'Credit Card', // Mock data
              accountType: foundUser.subscription?.plan === 'enterprise' ? 'Business' : 'Personal',
              verified: true, // Mock data
              twoFactorEnabled: Math.random() > 0.5, // Mock data
              apiKeys: Math.floor(Math.random() * 5), // Mock data
              integrations: [], // Mock data
              referralCode: foundUser.referralCode,
              walletId: foundUser.wallet?.walletId,
            };
            setUser(transformedUser);
          } else {
            setError('User not found');
          }
        } else {
          setError('Failed to load user data');
        }
      } catch (err) {
        console.error('Error fetching user data:', err);
        setError(err.message || 'Failed to load user data');
      } finally {
        setLoading(false);
      }
    };

    fetchUserData();
  }, [params.id]);

  if (loading) {
    return (
      <div className="px-2 px-md-3 px-lg-4 d-flex justify-content-center align-items-center" style={{ minHeight: '400px' }}>
        <div className="text-center">
          <div className="spinner-border text-primary" role="status" style={{ width: '3rem', height: '3rem' }}>
            <span className="visually-hidden">Loading...</span>
          </div>
          <p className="mt-3 text-muted">Loading user profile...</p>
        </div>
      </div>
    );
  }

  if (error || !user) {
    return (
      <div className="px-2 px-md-3 px-lg-4 d-flex justify-content-center align-items-center" style={{ minHeight: '400px' }}>
        <div className="text-center">
          <div className="alert alert-danger" role="alert" style={{ borderRadius: '12px' }}>
            <strong>Error:</strong> {error || 'User not found'}
            <br />
            <button
              className="btn btn-outline-primary mt-3"
              onClick={() => router.push('/admin/dashboard/users')}
            >
              Back to Users
            </button>
          </div>
        </div>
      </div>
    );
  }

  // Helper functions
  const getPlanColor = (plan) => {
    switch (plan.toLowerCase()) {
      case 'premium': return '#ff8c00';
      case 'pro': return '#0066cc';
      case 'basic': return '#43e97b';
      default: return '#6c757d';
    }
  };

  const getPlanGradient = (plan) => {
    switch (plan.toLowerCase()) {
      case 'premium': return 'linear-gradient(135deg, #ff8c00 0%, #ff6b00 100%)';
      case 'pro': return 'linear-gradient(135deg, #0066cc 0%, #0052a3 100%)';
      case 'basic': return 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
      default: return 'linear-gradient(135deg, #6c757d 0%, #5a6268 100%)';
    }
  };

  const storagePercentage = user.storageLimit ? Math.min((parseFloat(user.storageUsed) / parseFloat(user.storageLimit.replace(' GB', ''))) * 100, 100) : 0;

  return (
    <div className="px-2 px-md-3 px-lg-4" style={{ width: '100%', maxWidth: '100%', overflowX: 'hidden' }}>
      <div className="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between mb-3 mb-md-4 gap-3">
        <div className="d-flex align-items-center flex-wrap gap-2">
          <button
            className="btn btn-outline-secondary d-flex align-items-center flex-shrink-0"
            onClick={() => router.push('/admin/dashboard/users')}
            style={{
              transition: 'all 0.3s ease',
              fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
              padding: '0.5rem 1rem'
            }}
            onMouseEnter={(e) => {
              if (window.innerWidth > 768) {
                e.currentTarget.style.transform = 'translateX(-3px)';
              }
            }}
            onMouseLeave={(e) => {
              e.currentTarget.style.transform = 'translateX(0)';
            }}
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2 d-md-none">
              <path fillRule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16" className="me-2 d-none d-md-block">
              <path fillRule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            <span className="d-none d-sm-inline">Back</span>
          </button>
          <div className="d-flex align-items-center">
            <div
              className="d-flex align-items-center justify-content-center me-2 me-md-3 flex-shrink-0"
              style={{
                width: '40px',
                height: '40px',
                borderRadius: '10px',
                background: getPlanGradient(user.plan),
                boxShadow: `0 4px 15px ${getPlanColor(user.plan)}40`
              }}
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 16 16" className="d-md-none">
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 16 16" className="d-none d-md-block">
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
              </svg>
            </div>
            <div>
              <h2 className="mb-0 fw-bold" style={{ fontSize: 'clamp(1.25rem, 4vw, 1.75rem)' }}>User Profile</h2>
              <p className="text-muted mb-0 small d-none d-md-block">View and manage user information</p>
            </div>
          </div>
        </div>
      </div>

      {/* Professional Navigation Tabs */}
      <div className="mt-4 mb-4">
        <div
          className="card border-0"
          style={{
            background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)',
            borderRadius: '16px',
            boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
            backdropFilter: 'blur(10px)'
          }}
        >
          <div className="card-body p-2 p-md-3">
            <nav>
              <div className="nav nav-tabs border-0 d-flex flex-wrap justify-content-center" id="profileTabs" role="tablist" style={{ gap: '0.25rem' }}>
                <button
                  className={`nav-link ${activeTab === 'overview' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="overview-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('overview')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'overview' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'overview' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'overview' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'overview') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'overview') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Overview</span>
                </button>
                <button
                  className={`nav-link ${activeTab === 'reference' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="reference-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('reference')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'reference' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'reference' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'reference' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'reference') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'reference') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 0 1.036-.696l.72-.504a.5.5 0 0 1 .671.33c.025.16.045.33.061.52.071.32.106.739.106 1.276 0 .256-.03.585-.113.856-.113.27-.234.566-.368.822a.5.5 0 0 1-.562.395c-.224-.053-.451-.224-.648-.433-.294-.403-.577-.843-.646-1.33a.5.5 0 0 1 .33-.671l.595-.195c.113-.037.23-.095.337-.174a1.9 1.9 0 0 0 .593-.286c.26-.186.458-.393.596-.653a.5.5 0 0 1 .874.33c-.16.387-.316.7-.52.932-.218.247-.444.378-.728.491-.303.123-.614.22-1.012.22z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Reference</span>
                </button>
                <button
                  className={`nav-link ${activeTab === 'wallet' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="wallet-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('wallet')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'wallet' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'wallet' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'wallet' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'wallet') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'wallet') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm7 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Wallet</span>
                </button>
                <button
                  className={`nav-link ${activeTab === 'notification' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="notification-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('notification')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'notification' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'notification' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'notification' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'notification') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'notification') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Notification</span>
                </button>
                <button
                  className={`nav-link ${activeTab === 'trade-history' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="trade-history-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('trade-history')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'trade-history' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'trade-history' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'trade-history' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'trade-history') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'trade-history') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857A.857.857 0 0 1 1.857 3H8v.5a.5.5 0 0 0 1 0V3h5.143c.473 0 .857.384.857.857v10.286a.857.857 0 0 1-.857.857H8v-.5a.5.5 0 0 0-1 0v.5H1.857A.857.857 0 0 1 1 14.143V3.857z"/>
                    <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Trade History</span>
                </button>
                <button
                  className={`nav-link ${activeTab === 'bots' ? 'active' : ''} d-flex align-items-center border-0 rounded-pill px-3 px-md-4 py-2 py-md-3`}
                  id="bots-tab"
                  type="button"
                  role="tab"
                  onClick={() => setActiveTab('bots')}
                  style={{
                    fontSize: 'clamp(0.85rem, 2vw, 0.95rem)',
                    fontWeight: '600',
                    transition: 'all 0.3s ease',
                    background: activeTab === 'bots' ? `linear-gradient(135deg, ${getPlanColor(user.plan)} 0%, ${getPlanColor(user.plan)}dd 100%)` : 'transparent',
                    color: activeTab === 'bots' ? 'white' : 'var(--text-muted)',
                    boxShadow: activeTab === 'bots' ? `0 4px 15px ${getPlanColor(user.plan)}40` : 'none',
                    minWidth: '100px',
                    justifyContent: 'center'
                  }}
                  onMouseEnter={(e) => {
                    if (activeTab !== 'bots') {
                      e.target.style.background = 'rgba(0,0,0,0.05)';
                      e.target.style.transform = 'translateY(-1px)';
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (activeTab !== 'bots') {
                      e.target.style.background = 'transparent';
                      e.target.style.transform = 'translateY(0)';
                    }
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="me-2">
                    <path d="M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8H8.5v.5a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6 5.5v-1zM8.5 5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1zM9 7.5v1.5H5V12a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7.5H9z"/>
                    <path d="M.25 1a.25.25 0 0 0-.25.25v1.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 1 3H.25a.25.25 0 0 0-.25.25v1.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-3.5A.25.25 0 0 0 .75 1h-.5zM3 3a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H3z"/>
                  </svg>
                  <span className="d-none d-sm-inline">Bots</span>
                </button>
              </div>
            </nav>
          </div>
        </div>
      </div>

      {/* Tab Content */}
      <div className="tab-content">
        {/* Overview Tab */}
        {activeTab === 'overview' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Overview Content</h4>
                <p>User overview information goes here.</p>
              </div>
            </div>
          </div>
        )}

        {/* Reference Tab */}
        {activeTab === 'reference' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Reference Content</h4>
                <p>User referral program information goes here.</p>
              </div>
            </div>
          </div>
        )}

        {/* Wallet Tab */}
        {activeTab === 'wallet' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Wallet Content</h4>
                <p>User wallet information goes here.</p>
              </div>
            </div>
          </div>
        )}

        {/* Notification Tab */}
        {activeTab === 'notification' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Notification Content</h4>
                <p>User notification information goes here.</p>
              </div>
            </div>
          </div>
        )}

        {/* Trade History Tab */}
        {activeTab === 'trade-history' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Trade History Content</h4>
                <p>User trading history goes here.</p>
              </div>
            </div>
          </div>
        )}

        {/* Bots Tab */}
        {activeTab === 'bots' && (
          <div className="row g-3 g-md-4">
            <div className="col-12">
              <div className="text-center py-5">
                <h4>Bots Content</h4>
                <p>User bot information goes here.</p>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
          <div
            className="card h-100"
            style={{
              background: '#ffffff',
              border: `1px solid ${getPlanColor(user.plan)}20`,
              borderRadius: '16px',
              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
              overflow: 'hidden',
              transition: 'all 0.3s ease'
            }}
            onMouseEnter={(e) => {
              if (window.innerWidth > 768) {
                e.currentTarget.style.transform = 'translateY(-4px)';
                e.currentTarget.style.boxShadow = '0 8px 25px rgba(0,0,0,0.12)';
              }
            }}
            onMouseLeave={(e) => {
              e.currentTarget.style.transform = 'translateY(0)';
              e.currentTarget.style.boxShadow = '0 4px 20px rgba(0,0,0,0.08)';
            }}
          >
            <div
              className="text-white p-3 p-md-4 p-lg-5"
              style={{
                background: getPlanGradient(user.plan),
                position: 'relative',
                overflow: 'hidden',
                borderRadius: '16px 16px 0 0'
              }}
            >
              <div
                className="d-none d-md-block"
                style={{
                  position: 'absolute',
                  top: '-50px',
                  right: '-50px',
                  width: '200px',
                  height: '200px',
                  borderRadius: '50%',
                  background: 'rgba(255, 255, 255, 0.1)'
                }}
              />
              <div
                className="d-none d-md-block"
                style={{
                  position: 'absolute',
                  bottom: '-30px',
                  left: '-30px',
                  width: '150px',
                  height: '150px',
                  borderRadius: '50%',
                  background: 'rgba(255, 255, 255, 0.1)'
                }}
              />
              <div className="text-center position-relative">
                <div
                  style={{
                    width: 'clamp(80px, 20vw, 120px)',
                    height: 'clamp(80px, 20vw, 120px)',
                    borderRadius: '50%',
                    background: 'rgba(255, 255, 255, 0.25)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    margin: '0 auto 15px',
                    border: 'clamp(3px, 1vw, 5px) solid rgba(255, 255, 255, 0.3)',
                    boxShadow: '0 8px 32px rgba(0,0,0,0.2)'
                  }}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="clamp(40px, 10vw, 60px)" height="clamp(40px, 10vw, 60px)" fill="white" viewBox="0 0 16 16">
                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                  </svg>
                </div>
                <h3 className="fw-bold mb-2" style={{ fontSize: 'clamp(1.1rem, 4vw, 1.5rem)' }}>{user.name}</h3>
                <p className="mb-0 opacity-90 text-truncate" style={{ fontSize: 'clamp(0.85rem, 2vw, 0.95rem)' }}>{user.email}</p>
                <div className="mt-3">
                  <span
                    className={`badge ${
                      user.status === 'Active' ? 'bg-success' : 'bg-secondary'
                    }`}
                    style={{ fontSize: 'clamp(0.75rem, 2vw, 0.85rem)', padding: '0.4rem 0.8rem' }}
                  >
                    {user.status}
                  </span>
                </div>
              </div>
            </div>
            <div className="card-body p-3 p-md-4">
              <div className="mb-3 mb-md-4 pb-3 border-bottom">
                <div className="d-flex align-items-center justify-content-between mb-2">
                  <span className="text-muted small">User ID</span>
                  <span className="fw-bold" style={{ color: getPlanColor(user.plan), fontSize: 'clamp(0.9rem, 2vw, 1rem)' }}>#{user.userId}</span>
                </div>
                <div className="d-flex align-items-center justify-content-between">
                  <span className="text-muted small">Account Type</span>
                  <span className="fw-semibold" style={{ fontSize: 'clamp(0.9rem, 2vw, 1rem)' }}>{user.accountType}</span>
                </div>
              </div>

              <div className="mb-3">
                <div className="d-flex align-items-center justify-content-between mb-3">
                  <div className="d-flex align-items-center">
                    <div
                      className="d-flex align-items-center justify-content-center me-2 flex-shrink-0"
                      style={{
                        width: '32px',
                        height: '32px',
                        borderRadius: '8px',
                        background: user.verified ? 'rgba(40, 167, 69, 0.1)' : 'rgba(255, 193, 7, 0.1)'
                      }}
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill={user.verified ? '#28a745' : '#ffc107'} viewBox="0 0 16 16" className="d-md-none">
                        {user.verified ? (
                          <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                        ) : (
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        )}
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill={user.verified ? '#28a745' : '#ffc107'} viewBox="0 0 16 16" className="d-none d-md-block">
                        {user.verified ? (
                          <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                        ) : (
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        )}
                      </svg>
                    </div>
                    <span className="small" style={{ fontSize: 'clamp(0.8rem, 2vw, 0.9rem)' }}>Email Verified</span>
                  </div>
                  <span className={`badge ${user.verified ? 'bg-success' : 'bg-warning'}`} style={{ fontSize: 'clamp(0.7rem, 2vw, 0.85rem)' }}>
                    {user.verified ? 'Verified' : 'Pending'}
                  </span>
                </div>
                <div className="d-flex align-items-center justify-content-between">
                  <div className="d-flex align-items-center">
                    <div
                      className="d-flex align-items-center justify-content-center me-2 flex-shrink-0"
                      style={{
                        width: '32px',
                        height: '32px',
                        borderRadius: '8px',
                        background: user.twoFactorEnabled ? 'rgba(40, 167, 69, 0.1)' : 'rgba(108, 117, 125, 0.1)'
                      }}
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill={user.twoFactorEnabled ? '#28a745' : '#6c757d'} viewBox="0 0 16 16" className="d-md-none">
                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill={user.twoFactorEnabled ? '#28a745' : '#6c757d'} viewBox="0 0 16 16" className="d-none d-md-block">
                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                      </svg>
                    </div>
                    <span className="small" style={{ fontSize: 'clamp(0.8rem, 2vw, 0.9rem)' }}>2FA Enabled</span>
                  </div>
                  <span className={`badge ${user.twoFactorEnabled ? 'bg-success' : 'bg-secondary'}`} style={{ fontSize: 'clamp(0.7rem, 2vw, 0.85rem)' }}>
                    {user.twoFactorEnabled ? 'Enabled' : 'Disabled'}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
